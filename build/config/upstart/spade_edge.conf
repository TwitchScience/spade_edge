# Upstart script at /etc/init/spade_edge.conf

start on ebslvm-mounted and stopped cloud-final
# supposedly this will cause the system to hang shutdown on
# upstart killing the edge: http://goo.gl/lJQVzH
stop on starting rc RUNLEVEL=[016]

emits edge-running

respawn
respawn limit 10 5

# Set high enough that it won't be the bottleneck and low enough
# it can't use all the file handles.
limit nofile 50000 50000

kill timeout 300
kill signal SIGINT

script
  exec /opt/science/spade_edge/bin/run_edge.sh
  initctl emit edge-running
end script

